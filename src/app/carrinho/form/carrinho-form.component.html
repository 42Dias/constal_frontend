<form
  class="form"
  (ngSubmit)="doSave()"
  [formGroup]="form"
  #ngForm="ngForm"
  *ngIf="form"
>
  <app-user-form-field
    [control]="form.get(fields.userId.name)"
    [label]="fields.userId.label"
    [placeholder]="fields.userId.placeholder"
    [hint]="fields.userId.hint"
    [required]="fields.userId.required"
    [fetchFn]="fields.userId.fetchFn"
    [mapperFn]="fields.userId.mapperFn"
    [showCreate]="!modal"
    [submitted]="ngForm.submitted"
    mode="single"
  ></app-user-form-field>

  <app-produto-form-field
    [control]="form.get(fields.produto.name)"
    [label]="fields.produto.label"
    [placeholder]="fields.produto.placeholder"
    [hint]="fields.produto.hint"
    [required]="fields.produto.required"
    [fetchFn]="fields.produto.fetchFn"
    [mapperFn]="fields.produto.mapperFn"
    [showCreate]="!modal"
    [submitted]="ngForm.submitted"
    mode="multiple"
  ></app-produto-form-field>

  <div
    class="form-buttons"
    [class.form-buttons-modal]="modal"
  >
    <button
      mat-raised-button
      [disabled]="saveLoading"
      color="primary"
      type="submit"
    >
      <mat-icon
        inline
        fontSet="far"
        fontIcon="fa-save"
      ></mat-icon
      >&#160;
      <app-i18n key="common.save"></app-i18n>
    </button>
    <button
      mat-flat-button
      [disabled]="saveLoading"
      (click)="doReset()"
      type="button"
    >
      <mat-icon
        inline
        fontSet="fas"
        fontIcon="fa-undo"
      ></mat-icon
      >&#160;
      <app-i18n key="common.reset"></app-i18n>
    </button>

    <button
      mat-flat-button
      [disabled]="saveLoading"
      type="button"
      (click)="cancel.emit()"
    >
      <mat-icon
        inline
        fontSet="fas"
        fontIcon="fa-times"
      ></mat-icon
      >&#160;
      <app-i18n key="common.cancel"></app-i18n>
    </button>
  </div>
</form>
